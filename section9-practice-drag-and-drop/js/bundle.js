(()=>{"use strict";var t;!function(t){t[t.Active=0]="Active",t[t.Finished=1]="Finished"}(t||(t={}));const e=new class{constructor(){this.projects=[],this.listeners=[]}addProject(e,s,i){let n={title:e,description:s,people:i,id:Math.random(),status:t.Active};for(let t of this.listeners)t(this.projects.slice());this.projects.push(n),this.updateListeners()}addListener(t){this.listeners.push(t)}moveProject(t,e){let s=this.projects.find((e=>""+e.id===t));s&&s.status!==e&&(s.status=e,this.updateListeners())}updateListeners(){for(let t of this.listeners)t(this.projects.slice())}};class s{constructor(t,e){this.project=t,this.list=e,this.listItem=document.createElement("li"),this.listItem.draggable=!0;let s=document.createElement("h2"),i=document.createElement("h3"),n=document.createElement("p");s.innerHTML=this.project.title,i.innerHTML=this.project.description,n.innerHTML=this.persons(this.project.people)+" assigned",this.listItem.appendChild(s),this.listItem.appendChild(i),this.listItem.appendChild(n),this.listItem.id=""+t.id,null==e||e.appendChild(this.listItem),this.configure()}persons(t){return 1===t?"1 person":`${t} persons`}dragStartHandler(t){t.dataTransfer.setData("text/plain",""+this.project.id),t.dataTransfer.effectAllowed="move"}dragEndHandler(t){}configure(){this.listItem.addEventListener("dragstart",this.dragStartHandler),this.listItem.addEventListener("dragend",this.dragEndHandler)}}class i{constructor(s){this.type=s,this.assignedProjects=[],this.templateElement=document.getElementById("project-list"),this.wherePutElement=document.getElementById("app");let i=document.importNode(this.templateElement.content,!0);this.element=i.firstElementChild,this.element.id=`${this.type}-projects`,e.addListener((e=>{this.assignedProjects=e;let s=e.filter((e=>"active"===this.type?e.status===t.Active:e.status===t.Finished));this.assignedProjects=s,this.renderProjects()})),this.renderContent(),this.attach(),this.list=document.getElementById(`${this.type}-projects-list`)}renderProjects(){this.list.innerHTML="";for(let t of this.assignedProjects)new s(t,this.list)}attach(){this.wherePutElement.insertAdjacentElement("beforeend",this.element)}dragOverHandler(t){var e;t.dataTransfer&&"text/plain"===t.dataTransfer.types[0]&&(t.preventDefault(),null===(e=this.list)||void 0===e||e.classList.add("droppable"))}dropHandler(s){var i;let n=null===(i=s.dataTransfer)||void 0===i?void 0:i.getData("text/plain");e.moveProject(n,"active"===this.type?t.Active:t.Finished)}dragLeaveHandler(t){this.list.classList.remove("droppable")}renderContent(){let t=`${this.type}-projects-list`;this.element.querySelector("ul").id=t,this.element.querySelector("h2").innerText=`${this.type.toLocaleUpperCase()} PROJECTS`}}new class{constructor(){this.templateElement=document.getElementById("project-input"),this.wherePutElement=document.getElementById("app");let t=document.importNode(this.templateElement.content,!0);this.element=t.firstElementChild,this.element.id="user-input",this.titleInputELement=this.element.querySelector("#title"),this.descriptionInputELement=this.element.querySelector("#description"),this.numberInputELement=this.element.querySelector("#people"),this.attach(),this.configure()}gatherUserInput(){let t=this.titleInputELement.value,e=this.descriptionInputELement.value,s=this.numberInputELement.value;if(t.trim().length>0&&e.trim().length>0&&s.trim().length>0)return[t,e,+s]}handleSubmit(t){t.preventDefault(),this.gatherUserInput()?(e.addProject(this.titleInputELement.value,this.descriptionInputELement.value,+this.numberInputELement.value),this.titleInputELement.value="",this.descriptionInputELement.value="",this.numberInputELement.value=""):alert("Data is not correct!")}configure(){this.element.addEventListener("submit",this.handleSubmit)}attach(){this.wherePutElement.insertAdjacentElement("afterbegin",this.element)}},new i("active"),new i("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFRaEQsR0FBSyxhQUNsQk0sS0FBS2lFLGtCQUFvQmpFLEtBQUswQyxRQUFRb0IsY0FBYyxVQUNwRDlELEtBQUtrRSx3QkFBMEJsRSxLQUFLMEMsUUFBUW9CLGNBQWMsZ0JBQzFEOUQsS0FBS21FLG1CQUFxQm5FLEtBQUswQyxRQUFRb0IsY0FBYyxXQUNyRDlELEtBQUtpRCxTQUNMakQsS0FBS3dCLFdBQ1AsQ0FDQTRDLGtCQUNFLElBQUk5RSxFQUFRVSxLQUFLaUUsa0JBQWtCSSxNQUMvQjlFLEVBQWNTLEtBQUtrRSx3QkFBd0JHLE1BQzNDQyxFQUFTdEUsS0FBS21FLG1CQUFtQkUsTUFDckMsR0FDRS9FLEVBQU1pRixPQUFPQyxPQUFTLEdBQ3RCakYsRUFBWWdGLE9BQU9DLE9BQVMsR0FDNUJGLEVBQU9DLE9BQU9DLE9BQVMsRUFFdkIsTUFBTyxDQUFDbEYsRUFBT0MsR0FBYytFLEVBR2pDLENBQ0FHLGFBQWE5QyxHQUNYQSxFQUFNMkIsaUJBQ1l0RCxLQUFLb0UsbUJBRXJCLGFBQ0VwRSxLQUFLaUUsa0JBQWtCSSxNQUN2QnJFLEtBQUtrRSx3QkFBd0JHLE9BQzVCckUsS0FBS21FLG1CQUFtQkUsT0FFM0JyRSxLQUFLaUUsa0JBQWtCSSxNQUFRLEdBQy9CckUsS0FBS2tFLHdCQUF3QkcsTUFBUSxHQUNyQ3JFLEtBQUttRSxtQkFBbUJFLE1BQVEsSUFDM0JLLE1BQU0sdUJBQ2YsQ0FFQWxELFlBQ0V4QixLQUFLMEMsUUFBUVQsaUJBQWlCLFNBQVVqQyxLQUFLeUUsYUFDL0MsQ0FDQXhCLFNBQ0VqRCxLQUFLdUMsZ0JBQWdCWSxzQkFBc0IsYUFBY25ELEtBQUswQyxRQUNoRSxHRHRERixJQUFJUixFQUFZLFVBQ2hCLElBQUlBLEVBQVksVyIsInNvdXJjZXMiOlsid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9jb21wb25lbnRzL3Byb2plY3Qtc3RhdHVzLnRzIiwid2VicGFjazovL3VuZGVyc3RhbmRpbmctdHlwZXNjcmlwdC8uL3NyYy9zdGF0ZS9wcm9qZWN0U3RhdGUudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdEl0ZW0udHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2NvbXBvbmVudHMvcHJvamVjdExpc3QudHMiLCJ3ZWJwYWNrOi8vdW5kZXJzdGFuZGluZy10eXBlc2NyaXB0Ly4vc3JjL2FwcC50cyIsIndlYnBhY2s6Ly91bmRlcnN0YW5kaW5nLXR5cGVzY3JpcHQvLi9zcmMvY29tcG9uZW50cy9wcm9qZWN0SW5wdXQudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gUHJvamVjdFN0YXR1cyB7XHJcbiAgQWN0aXZlICxcclxuICBGaW5pc2hlZFxyXG59XHJcbiIsIi8vYnVpbGQgYSBjbGFzcyB3aGljaCBtYW5hZ2VzIHRoZSBzdGF0ZSBvZiBvdXIgYXBwbGljYXRpb25cclxuLy9wcm9qZWN0IHN0ZXRlIG1hbmFnbWVudCBjbGFzc1xyXG4vL1Byb2plY3QgU3RhdGUgTWFuYWdlbWVudFxyXG5pbXBvcnQgeyBQcm9qZWN0U3RhdHVzIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvcHJvamVjdC1zdGF0dXNcIjtcclxuZXhwb3J0IGNsYXNzIFByb2plY3RTdGF0ZSB7XHJcbiAgcHJvamVjdHM6IGFueVtdID0gW107XHJcbiAgbGlzdGVuZXJzOiBhbnlbXSA9IFtdO1xyXG5cclxuICBhZGRQcm9qZWN0KHRpdGxlOiBzdHJpbmcsIGRlc2NyaXB0aW9uOiBzdHJpbmcsIHBlb3BsZTogbnVtYmVyKSB7XHJcbiAgICBsZXQgbmV3UHJvamVjdDogYW55ID0ge1xyXG4gICAgICB0aXRsZSxcclxuICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgIHBlb3BsZSxcclxuICAgICAgaWQ6IE1hdGgucmFuZG9tKCksXHJcbiAgICAgIHN0YXR1czogUHJvamVjdFN0YXR1cy5BY3RpdmUsXHJcbiAgICB9O1xyXG5cclxuICAgIGZvciAobGV0IGxpc3RlbmVyRm4gb2YgdGhpcy5saXN0ZW5lcnMpIHtcclxuICAgICAgLy9jb3B5IG9mIHRoYXQgYXJyYXlcclxuICAgICAgbGlzdGVuZXJGbih0aGlzLnByb2plY3RzLnNsaWNlKCkpO1xyXG4gICAgfVxyXG4gICAgdGhpcy5wcm9qZWN0cy5wdXNoKG5ld1Byb2plY3QpO1xyXG4gICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuICB9XHJcbiAgYWRkTGlzdGVuZXIobGlzdGVuZXJGbjogRnVuY3Rpb24pIHtcclxuICAgIHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcbiAgfVxyXG4gIG1vdmVQcm9qZWN0KHByb2plY3RJZDogc3RyaW5nLCBzdDogUHJvamVjdFN0YXR1cykge1xyXG4gICAgbGV0IHByb2plY3QgPSB0aGlzLnByb2plY3RzLmZpbmQoKGVsKSA9PiBcIlwiICsgZWwuaWQgPT09IHByb2plY3RJZCk7XHJcbiAgICBpZiAocHJvamVjdCAmJiBwcm9qZWN0LnN0YXR1cyAhPT0gc3QpIHtcclxuICAgICAgcHJvamVjdC5zdGF0dXMgPSBzdDtcclxuICAgICAgdGhpcy51cGRhdGVMaXN0ZW5lcnMoKTtcclxuICAgIH1cclxuICB9XHJcbiAgdXBkYXRlTGlzdGVuZXJzKCkge1xyXG4gICAgZm9yIChsZXQgbGlzdGVuZXJGbiBvZiB0aGlzLmxpc3RlbmVycykge1xyXG4gICAgICAvL2NvcHkgb2YgdGhhdCBhcnJheVxyXG4gICAgICBsaXN0ZW5lckZuKHRoaXMucHJvamVjdHMuc2xpY2UoKSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbmxldCBwcm9qZWN0U3RhdGUgPSBuZXcgUHJvamVjdFN0YXRlKCk7XHJcbmV4cG9ydCBkZWZhdWx0IHByb2plY3RTdGF0ZTtcclxuIiwiaW1wb3J0ICogYXMgRCBmcm9tIFwiLi4vbW9kZWxzL2RyYWctZHJvcC1pbnRlcmZhY2VzXCI7XHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb2plY3RJdGVtIGltcGxlbWVudHMgRC5EcmFnZ2FibGUge1xyXG4gIGxpc3RJdGVtO1xyXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBwcm9qZWN0OiBhbnksIHB1YmxpYyBsaXN0OiBIVE1MRWxlbWVudCkge1xyXG4gICAgdGhpcy5saXN0SXRlbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJsaVwiKTtcclxuXHJcbiAgICB0aGlzLmxpc3RJdGVtLmRyYWdnYWJsZSA9IHRydWU7XHJcbiAgICBsZXQgaDIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDJcIik7XHJcbiAgICBsZXQgaDMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaDNcIik7XHJcbiAgICBsZXQgcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJwXCIpO1xyXG4gICAgaDIuaW5uZXJIVE1MID0gdGhpcy5wcm9qZWN0LnRpdGxlO1xyXG4gICAgaDMuaW5uZXJIVE1MID0gdGhpcy5wcm9qZWN0LmRlc2NyaXB0aW9uO1xyXG4gICAgcC5pbm5lckhUTUwgPSB0aGlzLnBlcnNvbnModGhpcy5wcm9qZWN0LnBlb3BsZSkgKyBcIiBhc3NpZ25lZFwiO1xyXG4gICAgdGhpcy5saXN0SXRlbS5hcHBlbmRDaGlsZChoMik7XHJcbiAgICB0aGlzLmxpc3RJdGVtLmFwcGVuZENoaWxkKGgzKTtcclxuICAgIHRoaXMubGlzdEl0ZW0uYXBwZW5kQ2hpbGQocCk7XHJcbiAgICB0aGlzLmxpc3RJdGVtLmlkID0gXCJcIiArIHByb2plY3QuaWQ7XHJcbiAgICBsaXN0Py5hcHBlbmRDaGlsZCh0aGlzLmxpc3RJdGVtKTtcclxuICAgIHRoaXMuY29uZmlndXJlKCk7XHJcbiAgfVxyXG4gIHBlcnNvbnMobnVtOiBudW1iZXIpIHtcclxuICAgIGlmIChudW0gPT09IDEpIHJldHVybiBcIjEgcGVyc29uXCI7XHJcbiAgICByZXR1cm4gYCR7bnVtfSBwZXJzb25zYDtcclxuICB9XHJcbiAgZHJhZ1N0YXJ0SGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XHJcbiAgICBldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoXCJ0ZXh0L3BsYWluXCIsIFwiXCIgKyB0aGlzLnByb2plY3QuaWQpO1xyXG4gICAgZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gXCJtb3ZlXCI7XHJcbiAgfVxyXG4gIGRyYWdFbmRIYW5kbGVyKF86IERyYWdFdmVudCkge31cclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmxpc3RJdGVtLmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnc3RhcnRcIiwgdGhpcy5kcmFnU3RhcnRIYW5kbGVyKTtcclxuICAgIHRoaXMubGlzdEl0ZW0uYWRkRXZlbnRMaXN0ZW5lcihcImRyYWdlbmRcIiwgdGhpcy5kcmFnRW5kSGFuZGxlcik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBwcm9qZWN0U3RhdGUgZnJvbSBcIi4uL3N0YXRlL3Byb2plY3RTdGF0ZVwiO1xyXG5pbXBvcnQgKiBhcyBEIGZyb20gXCIuLi9tb2RlbHMvZHJhZy1kcm9wLWludGVyZmFjZXNcIjtcclxuaW1wb3J0IFByb2plY3RJdGVtIGZyb20gXCIuL3Byb2plY3RJdGVtXCI7XHJcbmltcG9ydCB7IFByb2plY3RTdGF0dXMgfSBmcm9tIFwiLi9wcm9qZWN0LXN0YXR1c1wiO1xyXG4vLyBpbXBvcnQgYXV0b2JpbmQgZnJvbSBcIi4vYXV0b2JpbmQuanNcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUHJvamVjdExpc3QgaW1wbGVtZW50cyBELkRyYWdUYXJnZXQge1xyXG4gIHRlbXBsYXRlRWxlbWVudDtcclxuICB3aGVyZVB1dEVsZW1lbnQ7XHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgYXNzaWduZWRQcm9qZWN0czogYW55W107XHJcbiAgbGlzdDogSFRNTEVsZW1lbnQ7XHJcbiAgY29uc3RydWN0b3IocHVibGljIHR5cGU6IFwiYWN0aXZlXCIgfCBcImZpbmlzaGVkXCIpIHtcclxuICAgIHRoaXMuYXNzaWduZWRQcm9qZWN0cyA9IFtdO1xyXG5cclxuICAgIHRoaXMudGVtcGxhdGVFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXHJcbiAgICAgIFwicHJvamVjdC1saXN0XCJcclxuICAgICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIHRoaXMud2hlcmVQdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgbGV0IGltcG9ydE5vZGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIHRydWUpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gaW1wb3J0Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCEgYXMgSFRNTEZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5lbGVtZW50LmlkID0gYCR7dGhpcy50eXBlfS1wcm9qZWN0c2A7XHJcblxyXG4gICAgcHJvamVjdFN0YXRlLmFkZExpc3RlbmVyKChwcm9qZWN0czogYW55W10pID0+IHtcclxuICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcHJvamVjdHM7XHJcbiAgICAgIGxldCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKChlbCkgPT4ge1xyXG4gICAgICAgIGlmICh0aGlzLnR5cGUgPT09IFwiYWN0aXZlXCIpIHtcclxuICAgICAgICAgIHJldHVybiBlbC5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuQWN0aXZlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZWwuc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkZpbmlzaGVkO1xyXG4gICAgICB9KTtcclxuICAgICAgdGhpcy5hc3NpZ25lZFByb2plY3RzID0gcmVsZXZhbnRQcm9qZWN0cztcclxuICAgICAgdGhpcy5yZW5kZXJQcm9qZWN0cygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5yZW5kZXJDb250ZW50KCk7XHJcbiAgICB0aGlzLmF0dGFjaCgpO1xyXG4gICAgdGhpcy5saXN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YCkhO1xyXG4gICAgLy8gdGhpcy5saXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJkcmFnbGVhdmVcIiwgdGhpcy5kcmFnTGVhdmVIYW5kbGVyKTtcclxuICAgIC8vIHRoaXMubGlzdC5hZGRFdmVudExpc3RlbmVyKFwiZHJhZ292ZXJcIiwgdGhpcy5kcmFnT3ZlckhhbmRsZXIpO1xyXG4gICAgLy8gdGhpcy5saXN0LmFkZEV2ZW50TGlzdGVuZXIoXCJkcm9wXCIsIHRoaXMuZHJvcEhhbmRsZXIpO1xyXG4gIH1cclxuICByZW5kZXJQcm9qZWN0cygpIHtcclxuICAgIHRoaXMubGlzdC5pbm5lckhUTUwgPSBcIlwiO1xyXG4gICAgZm9yIChsZXQgaXRlbSBvZiB0aGlzLmFzc2lnbmVkUHJvamVjdHMpIHtcclxuICAgICAgbmV3IFByb2plY3RJdGVtKGl0ZW0sIHRoaXMubGlzdCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGF0dGFjaCgpIHtcclxuICAgIHRoaXMud2hlcmVQdXRFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWVuZFwiLCB0aGlzLmVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgZHJhZ092ZXJIYW5kbGVyKGV2ZW50OiBEcmFnRXZlbnQpIHtcclxuICAgIGlmIChldmVudC5kYXRhVHJhbnNmZXIgJiYgZXZlbnQuZGF0YVRyYW5zZmVyLnR5cGVzWzBdID09PSBcInRleHQvcGxhaW5cIikge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLmxpc3Q/LmNsYXNzTGlzdC5hZGQoXCJkcm9wcGFibGVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBkcm9wSGFuZGxlcihldmVudDogRHJhZ0V2ZW50KSB7XHJcbiAgICBsZXQgcHJvamVjdElkID0gZXZlbnQuZGF0YVRyYW5zZmVyPy5nZXREYXRhKFwidGV4dC9wbGFpblwiKSE7XHJcblxyXG4gICAgcHJvamVjdFN0YXRlLm1vdmVQcm9qZWN0KFxyXG4gICAgICBwcm9qZWN0SWQsXHJcbiAgICAgIHRoaXMudHlwZSA9PT0gXCJhY3RpdmVcIiA/IFByb2plY3RTdGF0dXMuQWN0aXZlIDogUHJvamVjdFN0YXR1cy5GaW5pc2hlZFxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIGRyYWdMZWF2ZUhhbmRsZXIoXzogRHJhZ0V2ZW50KSB7XHJcbiAgICB0aGlzLmxpc3QuY2xhc3NMaXN0LnJlbW92ZShcImRyb3BwYWJsZVwiKTtcclxuICB9XHJcbiAgcmVuZGVyQ29udGVudCgpIHtcclxuICAgIGxldCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCJ1bFwiKSEuaWQgPSBsaXN0SWQ7XHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCJoMlwiXHJcbiAgICApIS5pbm5lclRleHQgPSBgJHt0aGlzLnR5cGUudG9Mb2NhbGVVcHBlckNhc2UoKX0gUFJPSkVDVFNgO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUHJvamVjdExpc3QgZnJvbSBcIi4vY29tcG9uZW50cy9wcm9qZWN0TGlzdFwiO1xyXG5pbXBvcnQgUHJvamVjdElucHV0IGZyb20gXCIuL2NvbXBvbmVudHMvcHJvamVjdElucHV0XCI7XHJcbm5ldyBQcm9qZWN0SW5wdXQoKTtcclxubmV3IFByb2plY3RMaXN0KFwiYWN0aXZlXCIpO1xyXG5uZXcgUHJvamVjdExpc3QoXCJmaW5pc2hlZFwiKTtcclxuIiwiaW1wb3J0IHByb2plY3RTdGF0ZSBmcm9tIFwiLi4vc3RhdGUvcHJvamVjdFN0YXRlXCI7XHJcbi8vIGltcG9ydCBhdXRvYmluZCBmcm9tIFwiLi9hdXRvYmluZC5qc1wiO1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQcm9qZWN0SW5wdXQge1xyXG4gIHRlbXBsYXRlRWxlbWVudDtcclxuICB3aGVyZVB1dEVsZW1lbnQ7XHJcbiAgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgdGl0bGVJbnB1dEVMZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgZGVzY3JpcHRpb25JbnB1dEVMZW1lbnQ6IEhUTUxJbnB1dEVsZW1lbnQ7XHJcbiAgbnVtYmVySW5wdXRFTGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG4gIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgdGhpcy50ZW1wbGF0ZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcclxuICAgICAgXCJwcm9qZWN0LWlucHV0XCJcclxuICAgICkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcclxuICAgIHRoaXMud2hlcmVQdXRFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhcHBcIikgYXMgSFRNTERpdkVsZW1lbnQ7XHJcblxyXG4gICAgbGV0IGltcG9ydE5vZGUgPSBkb2N1bWVudC5pbXBvcnROb2RlKHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsIHRydWUpO1xyXG4gICAgdGhpcy5lbGVtZW50ID0gaW1wb3J0Tm9kZS5maXJzdEVsZW1lbnRDaGlsZCEgYXMgSFRNTEZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5lbGVtZW50LmlkID0gXCJ1c2VyLWlucHV0XCI7XHJcbiAgICB0aGlzLnRpdGxlSW5wdXRFTGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGl0bGVcIikhO1xyXG4gICAgdGhpcy5kZXNjcmlwdGlvbklucHV0RUxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiI2Rlc2NyaXB0aW9uXCIpITtcclxuICAgIHRoaXMubnVtYmVySW5wdXRFTGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcGVvcGxlXCIpITtcclxuICAgIHRoaXMuYXR0YWNoKCk7XHJcbiAgICB0aGlzLmNvbmZpZ3VyZSgpO1xyXG4gIH1cclxuICBnYXRoZXJVc2VySW5wdXQoKTogW3N0cmluZywgc3RyaW5nLCBudW1iZXJdIHwgdm9pZCB7XHJcbiAgICBsZXQgdGl0bGUgPSB0aGlzLnRpdGxlSW5wdXRFTGVtZW50LnZhbHVlO1xyXG4gICAgbGV0IGRlc2NyaXB0aW9uID0gdGhpcy5kZXNjcmlwdGlvbklucHV0RUxlbWVudC52YWx1ZTtcclxuICAgIGxldCBudW1iZXIgPSB0aGlzLm51bWJlcklucHV0RUxlbWVudC52YWx1ZTtcclxuICAgIGlmIChcclxuICAgICAgdGl0bGUudHJpbSgpLmxlbmd0aCA+IDAgJiZcclxuICAgICAgZGVzY3JpcHRpb24udHJpbSgpLmxlbmd0aCA+IDAgJiZcclxuICAgICAgbnVtYmVyLnRyaW0oKS5sZW5ndGggPiAwXHJcbiAgICApIHtcclxuICAgICAgcmV0dXJuIFt0aXRsZSwgZGVzY3JpcHRpb24sICtudW1iZXJdO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuO1xyXG4gIH1cclxuICBoYW5kbGVTdWJtaXQoZXZlbnQ6IEV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgbGV0IGlucHV0UmVzdWx0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuICAgIGlmIChpbnB1dFJlc3VsdCkge1xyXG4gICAgICBwcm9qZWN0U3RhdGUuYWRkUHJvamVjdChcclxuICAgICAgICB0aGlzLnRpdGxlSW5wdXRFTGVtZW50LnZhbHVlLFxyXG4gICAgICAgIHRoaXMuZGVzY3JpcHRpb25JbnB1dEVMZW1lbnQudmFsdWUsXHJcbiAgICAgICAgK3RoaXMubnVtYmVySW5wdXRFTGVtZW50LnZhbHVlXHJcbiAgICAgICk7XHJcbiAgICAgIHRoaXMudGl0bGVJbnB1dEVMZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgICB0aGlzLmRlc2NyaXB0aW9uSW5wdXRFTGVtZW50LnZhbHVlID0gXCJcIjtcclxuICAgICAgdGhpcy5udW1iZXJJbnB1dEVMZW1lbnQudmFsdWUgPSBcIlwiO1xyXG4gICAgfSBlbHNlIGFsZXJ0KFwiRGF0YSBpcyBub3QgY29ycmVjdCFcIik7XHJcbiAgfVxyXG5cclxuICBjb25maWd1cmUoKSB7XHJcbiAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCB0aGlzLmhhbmRsZVN1Ym1pdCk7XHJcbiAgfVxyXG4gIGF0dGFjaCgpIHtcclxuICAgIHRoaXMud2hlcmVQdXRFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyYmVnaW5cIiwgdGhpcy5lbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIlByb2plY3RTdGF0dXMiLCJwcm9qZWN0cyIsImxpc3RlbmVycyIsImFkZFByb2plY3QiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicGVvcGxlIiwibmV3UHJvamVjdCIsImlkIiwiTWF0aCIsInJhbmRvbSIsInN0YXR1cyIsIkFjdGl2ZSIsImxpc3RlbmVyRm4iLCJ0aGlzIiwic2xpY2UiLCJwdXNoIiwidXBkYXRlTGlzdGVuZXJzIiwiYWRkTGlzdGVuZXIiLCJtb3ZlUHJvamVjdCIsInByb2plY3RJZCIsInN0IiwicHJvamVjdCIsImZpbmQiLCJlbCIsIlByb2plY3RJdGVtIiwiY29uc3RydWN0b3IiLCJsaXN0IiwibGlzdEl0ZW0iLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJkcmFnZ2FibGUiLCJoMiIsImgzIiwicCIsImlubmVySFRNTCIsInBlcnNvbnMiLCJhcHBlbmRDaGlsZCIsImNvbmZpZ3VyZSIsIm51bSIsImRyYWdTdGFydEhhbmRsZXIiLCJldmVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiZHJhZ0VuZEhhbmRsZXIiLCJfIiwiYWRkRXZlbnRMaXN0ZW5lciIsIlByb2plY3RMaXN0IiwidHlwZSIsImFzc2lnbmVkUHJvamVjdHMiLCJ0ZW1wbGF0ZUVsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsIndoZXJlUHV0RWxlbWVudCIsImltcG9ydE5vZGUiLCJjb250ZW50IiwiZWxlbWVudCIsImZpcnN0RWxlbWVudENoaWxkIiwicmVsZXZhbnRQcm9qZWN0cyIsImZpbHRlciIsIkZpbmlzaGVkIiwicmVuZGVyUHJvamVjdHMiLCJyZW5kZXJDb250ZW50IiwiYXR0YWNoIiwiaXRlbSIsImluc2VydEFkamFjZW50RWxlbWVudCIsImRyYWdPdmVySGFuZGxlciIsInR5cGVzIiwicHJldmVudERlZmF1bHQiLCJjbGFzc0xpc3QiLCJhZGQiLCJkcm9wSGFuZGxlciIsImdldERhdGEiLCJkcmFnTGVhdmVIYW5kbGVyIiwicmVtb3ZlIiwibGlzdElkIiwicXVlcnlTZWxlY3RvciIsImlubmVyVGV4dCIsInRvTG9jYWxlVXBwZXJDYXNlIiwidGl0bGVJbnB1dEVMZW1lbnQiLCJkZXNjcmlwdGlvbklucHV0RUxlbWVudCIsIm51bWJlcklucHV0RUxlbWVudCIsImdhdGhlclVzZXJJbnB1dCIsInZhbHVlIiwibnVtYmVyIiwidHJpbSIsImxlbmd0aCIsImhhbmRsZVN1Ym1pdCIsImFsZXJ0Il0sInNvdXJjZVJvb3QiOiIifQ==